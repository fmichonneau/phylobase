<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head><title>NEXUS CLASS LIBRARY: NxsSetReader Class</title>

<style type="text/css"> 
<!--
@import url(ncl.css);
.quickref {font-family: Arial, sans-serif}
.public {font-weight: bold; color: black; background: white;}
.protected {font-weight: bold; color: teal; background: white;}
.private {font-weight: bold; color: red; background: white;}
.groupheading {font-size: large; font-weight: bold;}
.classy {font-family: Arial, sans-serif; color: navy;}
.variablename {font-weight: bold; color: maroon;}
-->
</style>
</head>
<body>

<table border="1" width="100%">
<tr><td>
<table border="0" width="100%">
<tr>
<td align="left"><span class="classy">NEXUS CLASS LIBRARY</span></td>
<td align="right"><span class="classy"><a href="index.html">home</a> | <a href="classes.html">classes</a> | <a href="functions.html">functions</a></span></td>
</tr>
</table>
</td></tr>
</table>

<h1>Class NxsSetReader</h1>

<h2>Enums</h2>
<a href="#NxsSetReaderEnum"><span class="quickref">NxsSetReaderEnum</span></a>
<h2>Data Members</h2>
<a href="#block"><span class="quickref">block</span></a>, <a href="#max"><span class="quickref">max</span></a>, <a href="#nxsset"><span class="quickref">nxsset</span></a>, <a href="#settype"><span class="quickref">settype</span></a>, <a href="#token"><span class="quickref">token</span></a>
<h2>Member Functions</h2>
<a href="#AddRange47"><span class="quickref">AddRange</span></a><a href="#GetTokenValue70"><span class="quickref">, GetTokenValue</span></a><a href="#NxsSetReader26"><span class="quickref">, NxsSetReader</span></a><a href="#Run101"><span class="quickref">, Run</span></a>
<h2>Class Description</h2>

<p>
A class for reading NEXUS set objects and storing them in a set of int values. The NxsUnsignedSet <span class="variablename">nxsset</span> will be  cleared, and <span class="variablename">nxsset</span> will be built up as the set is read, with each element in the list storing a  member of the set (ranges are stored as individual elements). This class handles set descriptions of the following  form:<pre> 4-7 15 20-.3;
</pre> The above set includes every number from 4 to 7 (inclusive), 15 and every third number from 20 to max, where <span class="variablename">max</span>  would ordinarily be set to either the last character (if <span class="variablename">settype</span> is `NxsSetReaderEnum::charset') or the last  taxon (if <span class="variablename">settype</span> is `NxsSetReaderEnum::taxset'). If <span class="variablename">max</span> equaled 30, the example above would be stored as follows (remember that internally the numbers are stored with offset 0, even though in the NEXUS data file the numbers always start at 1.<pre> 3, 4, 5, 6, 14, 19, 22, 25, 28
</pre> The following example of how NxsSetReader is used comes from the  <a href="NxsCharactersBlock.html">NxsCharactersBlock</a> ::HandleEliminate function:<pre> NxsSetReader(token, ncharTotal, eliminated, *this, NxsSetReader::charset).Run();
</pre> This reads in a set of eliminated characters from a NEXUS data file, storing the resulting set in the data member <span class="variablename">eliminated</span>. In this case <span class="variablename">max</span> is set to <span class="variablename">ncharTotal</span> (the total number of characters), and the block reference is set to the  <a href="NxsCharactersBlock.html">NxsCharactersBlock</a>  object, which provides a


<h3>Key to symbols and colors</h3>

<p><span class="public">public</span>, <span class="protected">protected</span>, <span class="private">private</span>, <code>A</code> = abstract, <code>C</code> = constructor, <code>D</code> = destructor, <code>I</code> = inline, <code>S</code> = static, <code>V</code> = virtual, <code>F</code> = friend</p>
<p>&nbsp;</p>
<center>
<table border="5" cellpadding="1" cellspacing="0" width="95%">
<tr bgcolor="#CCCCFF">
<td><span class="groupheading">Enums</span></td>
</tr>
</table>

<table border="1" cellpadding="3" cellspacing="0" width="95%">
  <tr><td>
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr><td>
        <table border="0" width="100%" cellpadding="1">
          <tr>
            <td align="left" width="25%"><code class="public"><a name="NxsSetReaderEnum">enum NxsSetReaderEnum</a></code></td>
            <td></td>
          </tr>
        </table>
      </td></tr>
      <tr><td>
        <table border="0" width="100%" cellpadding="0" cellspacing="0">
          <tr>
            <td width="15%">&nbsp;</td>
            <td align="left" colspan="2"><code>generic = 1</code></td>
          </tr>
          <tr>
            <td width="15%">&nbsp;</td>
            <td width="10%">&nbsp;</td>
            <td>means expect a generic set (say, characters weights)</td>
          </tr>
        </table>
      </td></tr>
      <tr><td>
        <table border="0" width="100%" cellpadding="0" cellspacing="0">
          <tr>
            <td width="15%">&nbsp;</td>
            <td align="left" colspan="2"><code>charset = 2</code></td>
          </tr>
          <tr>
            <td width="15%">&nbsp;</td>
            <td width="10%">&nbsp;</td>
            <td>means expect a character set</td>
          </tr>
        </table>
      </td></tr>
      <tr><td>
        <table border="0" width="100%" cellpadding="0" cellspacing="0">
          <tr>
            <td width="15%">&nbsp;</td>
            <td align="left" colspan="2"><code>taxset = 3</code></td>
          </tr>
          <tr>
            <td width="15%">&nbsp;</td>
            <td width="10%">&nbsp;</td>
            <td>means expect a taxon set</td>
          </tr>
        </table>
      </td></tr>
    </table>
  </td></tr>
</table>
</center>
<p>&nbsp;</p>
<center>
<table border="5" cellpadding="1" cellspacing="0" width="95%">
<tr bgcolor="#CCCCFF">
<td><span class="groupheading">Data Members</span></td>
</table>
<table border="1" cellpadding="3" cellspacing="0" width="95%">
<tr><td>
<table  width="100%" border="0" cellpadding="1">
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td align="right" valign="top" width="15%"><code>&nbsp;<a href="NxsBlock.html">NxsBlock</a></code></td>
<td>&nbsp;</td>
<td align="left" valign="top" width="82%"><code class="private"><a name="block">&block</a></code></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><dd>reference to the block object used for looking up labels</dd></td>
</tr>
</table>
</td></tr>
<tr><td>
<table  width="100%" border="0" cellpadding="1">
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td align="right" valign="top" width="15%"><code>&nbsp;unsigned</code></td>
<td>&nbsp;</td>
<td align="left" valign="top" width="82%"><code class="private"><a name="max">max</a></code></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><dd>maximum number of elements in the set</dd></td>
</tr>
</table>
</td></tr>
<tr><td>
<table  width="100%" border="0" cellpadding="1">
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td align="right" valign="top" width="15%"><code>&nbsp;NxsUnsignedSet</code></td>
<td>&nbsp;</td>
<td align="left" valign="top" width="82%"><code class="private"><a name="nxsset">&nxsset</a></code></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><dd>reference to the NxsUnsignedSet set being read</dd></td>
</tr>
</table>
</td></tr>
<tr><td>
<table  width="100%" border="0" cellpadding="1">
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td align="right" valign="top" width="15%"><code>&nbsp;unsigned</code></td>
<td>&nbsp;</td>
<td align="left" valign="top" width="82%"><code class="private"><a name="settype">settype</a></code></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><dd>the type of set being read (see the NxsSetReaderEnum enumeration)</dd></td>
</tr>
</table>
</td></tr>
<tr><td>
<table  width="100%" border="0" cellpadding="1">
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td align="right" valign="top" width="15%"><code>&nbsp;<a href="NxsToken.html">NxsToken</a></code></td>
<td>&nbsp;</td>
<td align="left" valign="top" width="82%"><code class="private"><a name="token">&token</a></code></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><dd>reference to the token being used to parse the NEXUS data file</dd></td>
</tr>
</table>
</td></tr>
</table>
</center>
<p>&nbsp;</p>
<center>
<table border="5" cellpadding="1" cellspacing="0" width="95%">
<tr bgcolor="#CCCCFF">
<td><span class="groupheading">Member Functions</span></td>
</table>
<table border="1" cellpadding="3" cellspacing="0" width="95%">
<tr><td>
<table width="100%" border="0" cellpadding="1">
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td align="right" valign="top" width="15%"><code>bool</code></td>
<td>&nbsp;</td>
<td align="left" valign="top" width="82%"><code class="public"><a name="AddRange47">AddRange</a></code><code>(unsigned first, unsigned last, unsigned modulus)</code></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><dd>Adds the range specified by <span class="variablename">first</span>, <span class="variablename">last</span>, and <span class="variablename">modulus</span> to the set. If <span class="variablename">modulus</span> is zero it is ignored. The  parameters <span class="variablename">first</span> and <span class="variablename">last</span> refer to numbers found in the data file itself, and thus have range [1..<span class="variablename">max</span>]. They  are stored in <span class="variablename">nxsset</span>, however, with offset 0. For example, if the data file says "4-102" this function would be called with <span class="variablename">first</span> = 4, <span class="variablename">last</span> = 10 and <span class="variablename">modulus</span> = 2, and the values stored in <span class="variablename">nxsset</span> would be 3, 5, 7, 9. The return value is true unless <span class="variablename">last</span> is greater than <span class="variablename">max</span>, <span class="variablename">first</span> is less than 1, or <span class="variablename">first</span> is greater than <span class="variablename">last</span>: in any of these cases, the return value is false to indicate failure to store this range.</dd></td>
</tr>
</table>
</td></tr>
<tr><td>
<table width="100%" border="0" cellpadding="1">
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td align="right" valign="top" width="15%"><code>unsigned</code></td>
<td>&nbsp;</td>
<td align="left" valign="top" width="82%"><code class="public"><a name="GetTokenValue70">GetTokenValue</a></code><code>()</code></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><dd>Tries to interpret <span class="variablename">token</span> as a number. Failing that, tries to interpret <span class="variablename">token</span> as a character or taxon label,  which it then converts to a number. Failing that, it throws a <a href="NxsException.html">NxsException</a> exception.</dd></td>
</tr>
</table>
</td></tr>
<tr><td>
<table width="100%" border="0" cellpadding="1">
<tr>
<td>C</td>
<td>&nbsp;</td>
<td align="right" valign="top" width="15%"><code></code></td>
<td>&nbsp;</td>
<td align="left" valign="top" width="82%"><code class="public"><a name="NxsSetReader26">NxsSetReader</a></code><code>(NxsToken &t, unsigned maxValue, NxsUnsignedSet &iset, NxsBlock &nxsblk, unsigned type)</code></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><dd>Initializes <span class="variablename">max</span> to maxValue, <span class="variablename">settype</span> to <span class="variablename">type</span>, <span class="variablename">token</span> to <span class="variablename">t</span>, <span class="variablename">block</span> to <span class="variablename">nxsblk</span> and <span class="variablename">nxsset</span> to <span class="variablename">iset</span>,  then clears <span class="variablename">nxsset</span>.</dd></td>
</tr>
</table>
</td></tr>
<tr><td>
<table width="100%" border="0" cellpadding="1">
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td align="right" valign="top" width="15%"><code>bool</code></td>
<td>&nbsp;</td>
<td align="left" valign="top" width="82%"><code class="public"><a name="Run101">Run</a></code><code>()</code></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><dd>Reads in a set from a NEXUS data file. Returns true if the set was terminated by a semicolon, false otherwise.</dd></td>
</tr>
</table>
</td></tr>
</table>
</center>
